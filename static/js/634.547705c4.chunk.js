"use strict";(self.webpackChunkreact_widget_template=self.webpackChunkreact_widget_template||[]).push([[634],{4816:(e,t,s)=>{s.d(t,{A:()=>p});var o=s(5043),a=(s(8611),s(4220)),l=s(5284),n=s(3637),r=s(6047),i=s(3003),c=s(579);const d=e=>{let{data:t,isColumn:s,onDragStart:a,onDragEnd:l}=e;const n=(0,o.useRef)(null),d=(0,i.d4)((e=>e.droppedObject.droppedObjectData.initialDraggedData));return(0,o.useEffect)((()=>{n.current&&d&&(0,r.eB)(n.current,d,a,l)}),[t,d,a,l]),t?(0,c.jsxs)("div",{className:"d-flex ".concat(s?"flex-column":"flex-row"),children:[(0,c.jsx)("h5",{ref:n,className:"mb-1 text-start title ".concat(s?"":"me-2"),children:t.title}),(0,c.jsxs)("ul",{className:"list-group d-flex flex-row flex-sm-row flex-wrap justify-content-between pb-3 pb-md-0 ".concat(s?"":"w-75"),children:[(0,c.jsxs)("li",{className:"list-group-item flex-grow-1 text-start mx-0 ps-0 pb-0 ".concat(s?"":"d-flex flex-row justify-content-around"),style:{border:"0"},children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Type:"})," ",(0,c.jsx)("span",{className:"list-text",title:t.type,children:t.type})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Owner:"})," ",(0,c.jsx)("span",{className:"list-text",title:t.owner,children:t.owner})]}),s&&(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Maturity State:"})," ",(0,c.jsx)("span",{className:"list-text",title:t["Maturity State"],children:t["Maturity State"]})]})]}),s&&(0,c.jsxs)("li",{className:"list-group-item flex-grow-1 text-start mx-0 pt-0",style:{border:"0",paddingLeft:"0"},children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Dropped Revision :"})," ",(0,c.jsx)("span",{className:"list-text",title:t["Dropped Revision"],children:t["Dropped Revision"]})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Latest Released Revision:"})," ",(0,c.jsx)("span",{className:"list-text",title:t["Latest Released Revision"],children:t["Latest Released Revision"]})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Collabspace:"})," ",(0,c.jsx)("span",{className:"list-text",title:t["Collaborative Space Title"],children:t["Collaborative Space Title"]})]})]}),(0,c.jsx)("li",{className:"list-group-item flex-grow-1 text-start mx-0 ".concat(s?"":"d-flex flex-row"),style:{border:"0",paddingLeft:"0"},children:"Document"!==t.type&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"CAD Format:"})," ",(0,c.jsx)("span",{className:"list-text",title:t["CAD Format"],children:t["CAD Format"]})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"EIN:"})," ",(0,c.jsx)("span",{className:"list-text",title:t.EIN,children:t.EIN})]})]})}),(0,c.jsx)("div",{className:"d-none d-md-flex align-items-stretch",children:(0,c.jsx)("div",{className:"vr"})}),(0,c.jsx)("div",{className:"d-flex d-md-none w-100",children:(0,c.jsx)("hr",{className:"w-100"})}),(0,c.jsx)("li",{className:"list-group-item flex-grow-1 text-start mx-0",style:{border:"0"},children:(0,c.jsx)("p",{className:"description-container",title:t.Description,children:t.Description})})]})]}):null},p=e=>{let{data:t,onDragStart:s,onDragEnd:r}=e;const[i,p]=(0,o.useState)(!0);return(0,c.jsxs)(a.A,{className:"d-flex flex-row mt-4 border-0 ",style:{width:"100%"},children:[(0,c.jsx)("div",{className:"pb-3 d-none d-md-block me-5 ms-4",children:(0,c.jsx)(a.A.Img,{className:"".concat(i?"img-thumbnail":"image-resize img-thumbnail"," "),src:t.imageURL,alt:"Card image"})}),(0,c.jsx)(l.A,{className:"".concat(i?"p-0":"p-0 layout-change"," "),children:(0,c.jsx)(d,{data:t,isColumn:i,onDragStart:s,onDragEnd:r})}),(0,c.jsx)("button",{className:"me-2 p-0 btn btn-link accordion-toggle",onClick:()=>{p(!i)},children:(0,c.jsx)(n.A,{src:"https://khanfarzan17.github.io/tedting-revision-float/images/arrow.png",alt:"downArrow",className:"rotatable ".concat(i?"rotated":"")})})]})}},759:(e,t,s)=>{s.d(t,{A:()=>c});var o=s(5043),a=(s(4119),s(3637)),l=s(8012),n=s(579);const r=()=>{const{initializeDroppableArea:e}=(0,l.A)(),t=(0,o.useRef)(!1);return(0,o.useEffect)((()=>{t.current||(e(),t.current=!0)}),[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"droppable-container mt-4",children:[(0,n.jsx)(a.A,{style:{width:"90px",height:"90px"},src:"https://thewhitechamaleon.github.io/testrapp/images/drag.png",alt:"Data Collect",className:"search-icon"}),(0,n.jsx)("span",{className:"drag-and-drop-text",children:"Drag and Drop"}),(0,n.jsxs)("div",{className:"divider-container",children:[(0,n.jsx)("hr",{className:"divider"}),(0,n.jsx)("span",{className:"divider-text",children:"or"}),(0,n.jsx)("hr",{className:"divider"})]})]})})};var i=s(4816);const c=e=>{let{data:t}=e;const[s,a]=(0,o.useState)(!1);return(0,n.jsxs)("div",{className:"card-with-drag-and-drop ".concat(s?"dragging":""),children:[(0,n.jsx)(r,{}),(0,n.jsx)(i.A,{data:t,onDragStart:()=>{a(!0)},onDragEnd:()=>{a(!1)}})]})}},5362:(e,t,s)=>{s.d(t,{A:()=>c});var o=s(5043),a=s(8931),l=s(7111),n=s(3277),r=s(2725),i=s(579);const c=(0,o.forwardRef)(((e,t)=>{let{data:s,columns:c,addedItem:d,CAName:p,state:u}=e;const{showWarningToast:h}=(0,r.A)(),[m,g]=(0,o.useState)({});(0,o.useEffect)((()=>{g({})}),[s]);const f=()=>{const e=v.getSelectedRowModel().rows.map((e=>e.original["Available Plant"]));0!==e.length?(d(e),g({})):h(n.e1)};(0,o.useImperativeHandle)(t,(()=>({addPlant:f})));const w=(0,o.useMemo)((()=>[{id:"select",cell:e=>{let{row:t}=e;return(0,i.jsx)("input",{type:"checkbox",className:"form-check-input",checked:t.getIsSelected(),onChange:t.getToggleSelectedHandler()})}},...c]),[c]),v=(0,a.N4)({data:s,columns:w,state:{rowSelection:m},enableRowSelection:!0,onRowSelectionChange:g,getCoreRowModel:(0,l.HT)()});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{type:"button",className:"btn btn-outline-primary me-3",onClick:()=>{v.getRowModel().rows.forEach((e=>e.toggleSelected(!0)))},children:"Select All"}),(0,i.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{v.getRowModel().rows.forEach((e=>e.toggleSelected(!1)))},children:"Deselect All"})]}),v.getRowModel().rows.length>0?(0,i.jsx)("div",{className:"overflow-auto",style:{maxHeight:"60vh"},children:v.getRowModel().rows.map((e=>(0,i.jsxs)("div",{className:"p-3 border-bottom d-flex align-items-center",style:{backgroundColor:e.getIsSelected()?"#d5e8f2":"inherit"},children:[(0,i.jsx)("div",{className:"me-3",children:(0,a.Kv)(e.getVisibleCells()[0].column.columnDef.cell,e.getVisibleCells()[0].getContext())}),(0,i.jsx)("div",{children:e.original[c[0].accessorKey]})]},e.id)))}):(0,i.jsx)("p",{className:"text-muted p-3",children:"No data available"})]})}))},1397:(e,t,s)=>{s.d(t,{A:()=>d});var o=s(5043),a=s(1666),l=s(2691),n=s(4282),r=s(3910),i=s(7929),c=s(579);const d=e=>{let{onSearch:t,disabled:s}=e;const[d,p]=(0,o.useState)(""),u=(0,o.useRef)(null);return(0,c.jsxs)("div",{className:"search-content-container d-flex align-items-center",children:[(0,c.jsx)(r.g,{icon:i.$UM,onClick:()=>{d.trim()&&t(d)},className:"search-icon"}),(0,c.jsx)("span",{className:"ms-4 drag-and-drop-text flex-grow-1",children:(0,c.jsxs)(a.A,{children:[(0,c.jsx)(l.A.Control,{type:"text",ref:u,value:d,onChange:e=>{const t=e.target.value;p(t)},onKeyDown:e=>{"Enter"===e.key&&d.trim()&&t(d)},placeholder:"Search...",disabled:s}),d&&(0,c.jsx)(n.A,{variant:"btn-link",onClick:()=>{p(""),u.current.focus()},className:"clear-button",children:"\u2716"})]})})]})}},4675:(e,t,s)=>{s.d(t,{A:()=>n});var o=s(9379),a=s(5043),l=s(6047);const n=()=>{const[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,l.qZ)();n(e)}catch(e){console.error("[useInterComSearch] Error initializing InterCom:",e)}})()}),[]),(0,a.useEffect)((()=>()=>{e&&e.disconnect()}),[e]);return{performSearch:(0,a.useCallback)(((e,a,l)=>{var n;if(!s)return void console.warn("[useInterComSearch] InterCom is not loaded yet.");const r="socket"+(new Date).toISOString().replace(/[-:]/g,""),i=new s.Socket(r,{dispatchRetryInternal:0});i.subscribeServer("SearchComServer"),t(i),console.log("[useInterComSearch] performSearch called with:",e,a);const c=null===(n=window.widget)||void 0===n?void 0:n.id,d=(0,o.A)((0,o.A)({},a),{},{widget_id:c,app_socket_id:r,default_search_criteria:e});console.log("[useInterComSearch] Dispatching RegisterContext event with:",d),i.dispatchEvent("RegisterContext",d),i.dispatchEvent("InContextSearch",d);console.log("[useInterComSearch] Adding listener for Selected_Objects_search"),i.addListener("Selected_Objects_search",(e=>{console.log("[useInterComSearch] Search results received:",e),l&&l(e)}))}),[s])}}},1584:(e,t,s)=>{s.d(t,{A:()=>p});var o=s(3003),a=s(9379),l=s(6047);const n=async(e,t)=>{let s={CAAtt:[]};console.log("We are into Search CA Details");const o="https://oi000186152-us1-space.3dexperience.3ds.com/enovia";try{var a;const r=await(0,l.fV)(),i=async e=>new Promise(((s,o)=>{r.authenticatedRequest(e,{method:"GET",headers:t,type:"json",onComplete:e=>{console.log("Received response:",e),s(e)},onFailure:e=>{console.error("Request failed:",e),o(e)}})}));let c="".concat(o,"/resources/v1/modeler/dslc/changeaction/search?$searchStr=name:").concat(e);const d=null===(a=(await i(c)).changeAction[0])||void 0===a?void 0:a.identifier;if(console.log("Response From 1st Call",d),d){const e="".concat(o,"/resources/v1/modeler/dslc/changeaction/").concat(d,"?$fields=proposedChanges,flowDown"),t=await i(e);if(console.log("Response From 2nd Call",t),t){for(const e of t.isFlowDownOf||[])if("Change Action"===e.type){const t="".concat(o,"/resources/v1/modeler/dslc/changeaction/").concat(e.identifier,"?$fields=proposedChanges,flowDown");try{const e=await i(t);console.log("Response From 3rd Call",e),e&&s.CAAtt.push({CATitle:e.title,CAState:e.state})}catch(n){console.error("Error fetching parent CA data:",n)}}s.MCOState=t.state,s.MCOTitle=t.title}}return console.log("Final CA Details",s),s}catch(n){throw console.error("Error in SearchCA:",n),n}};var r=s(5645),i=(s(5043),s(3277)),c=s(2725),d=s(2268);const p=()=>{const{showErrorToast:e}=(0,c.A)(),t=(0,o.wA)();let s=window.widget.getValue("email");console.log("Email in usePlantAssignment:",s);return{handlePlantAssignment:async(o,c,p,u)=>{try{t((0,r.Ve)(!0));const h=await(0,d.I)();if(h){console.log("[UsePlantAssignment] Headers are",h);const e=await(async(e,t,s)=>{try{const o="https://oi000186152-us1-space.3dexperience.3ds.com/enovia";console.log("[UserGroup Status] ProductId: ",t);const n=await(0,l.fV)();let r="".concat(o,"/resources/v1/modeler/dslc/sharing/getSharing");const i=await new Promise(((s,o)=>{n.authenticatedRequest(r,{method:"POST",headers:(0,a.A)((0,a.A)({},e),{},{"Content-Type":"application/json"}),data:JSON.stringify({data:[{objectID:t}]}),type:"json",onComplete:s,onFailure:o})}));console.log("[Assigned Plant Service] Data received:",i);let c=[],d={groups:[]};if(i&&(i.results.forEach((e=>{e.sharings.userGroups.forEach((e=>{"Can Edit"===e.access&&d.groups.push({uri:e.userGroupID.replace(/[<>]/g,"")})}))})),d.groups.length>0)){let e="https://oi000186152-us1-usersgroup.3dexperience.3ds.com/3drdfpersist/resources/v1/usersgroup/groups?select=uri,members,title";const t=await new Promise(((t,s)=>{n.authenticatedRequest(e,{method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(d),type:"json",onComplete:t,onFailure:s})}));console.log("Group Response is:",t),t&&(c=t.groups.filter((e=>e.members.includes(s))).map((e=>e.title)))}return console.log("[UserGroup Status] User Groups:",c),c}catch(o){throw console.error("[UserGroup Status] Error occurred:",o),o}})(h,p,s);console.log("[Plant Assignment] User Groups:",e);let i=[...e,o];if(console.log("[Use Plant Assignment] All CollabSpaces:",i),i){const e=await(async(e,t)=>{try{const s="https://oi000186152-us1-space.3dexperience.3ds.com/enovia";let o=[];console.log("[All Plant Service] CollabSpaces: ",e),console.log("[All Plant Service] headers: ",t);const a=await(0,l.fV)(),n=async e=>new Promise(((s,o)=>{a.authenticatedRequest(e,{method:"GET",headers:t,type:"json",onComplete:e=>{console.log("Received response:",e),s(e)},onFailure:e=>{console.error("Request failed:",e),o(e)}})})),r=e.map((async e=>{try{var t,a;const c="".concat(s,"/resources/v1/modeler/dslib/dslib:Library/search?$searchStr=").concat(e),d=null===(t=(await n(c)).member)||void 0===t||null===(a=t.find((t=>t.title===e)))||void 0===a?void 0:a.id;if(console.log("[All Plant Service] Library id is:",d),d){const e="".concat(s,"/resources/v1/modeler/dslib/dslib:Library/").concat(d,"?$mask=dslib:ExpandClassifiableClassesMask"),t=await n(e),{member:a}=t;if(a&&a.length>0){var l,r;console.log("[Library Data Service] Member found:",a);const e=null===(l=a[0])||void 0===l?void 0:l.ChildClasses;if((null===e||void 0===e||null===(r=e.member)||void 0===r?void 0:r.length)>0){var i;const t=null===(i=e.member[0].ChildClasses)||void 0===i?void 0:i.member;if(t&&t.length>0){const e=t.filter((e=>!o.some((t=>t.id===e.id))));o=[...o,...e]}}}}}catch(c){throw console.error("Error processing group:",e,c),c}}));return await Promise.all(r),o}catch(s){throw console.error("[All Plant Service] Error occurred:",s),s}})(i,h);if(console.log("[Use Plant Assignment] All Plants are:",e),e){const s=await(async(e,t,s)=>{try{const o="https://oi000186152-us1-space.3dexperience.3ds.com/enovia";console.log("[Assigned Plant Service] Plant Members:",e);const a="".concat(o,"/resources/v1/modeler/dslib/dslib:ClassifiedItem/").concat(s,"?$mask=dslib:ClassificationAttributesMask"),r=await(0,l.fV)(),i=await new Promise(((e,s)=>{r.authenticatedRequest(a,{method:"GET",headers:t,type:"json",onComplete:e,onFailure:s})}));console.log("[Assigned Plant Service] Data received:",i);let c=[],d=[],p=i.member[0].ClassificationAttributes.member;return await Promise.all(p.map((async s=>{console.log("Class Item is ",s);for(let o of e)if(s.ClassID===o.id){let e=o.title;e=e.replace("Plant","").replace(/\s+/g,"");let a={id:s.ClassID,title:o.title};const l=s.Attributes.map((s=>s.name.includes("FlowDownCA")&&s.value?n(s.value,t).then((e=>{if(e){console.log(e),a.MFGChange=null===e||void 0===e?void 0:e.MCOTitle,a.MFGStatus=null===e||void 0===e?void 0:e.MCOState;let t="",s="";e.CAAtt.forEach((e=>{t+=","+e.CATitle,s+=","+e.CAState})),a.Change=t.slice(1),a.ChangeStatus=s.slice(1)}})):(a[s.name.replace(e,"").trim()]=s.value,Promise.resolve())));await Promise.all(l),c=[...c,a],console.log("Initial Assigned Classes",c),console.log("Processed Object:",a)}}))),console.log("[Assigned Plant Service] Initial Assigned Classes:",c),d=e.filter((e=>!c.some((t=>t.id===e.id)))),console.log("uniqueInAllclasses--:",d),{success:!0,data:{plantData:{allPlants:e,initialAssignedPlants:c,uniquePlants:d}}}}catch(o){return console.error("[Object Details] Failed to fetch data:",o),{success:!1,error:o}}})(e,h,p);console.log("[Use Plant Assignment]: ",s),s.success?(t((0,r.Lq)(s.data.plantData)),t((0,r.lL)(h))):console.error("Failed to fetch plant data")}else console.warn("[Use All Plants] There are no Plants")}else console.warn("[Use All Plants] There are no CollabSpace");let d={};console.log("Type Before:",u),d="Raw_Material"===u?{success:!0,data:[]}:await(async(e,t)=>{const s="https://oi000186152-us1-space.3dexperience.3ds.com/enovia";let o="".concat(s,"/resources/v1/modeler/dseng/dseng:EngItem/");o+=t,o+="/expand";let n={expandDepth:1,type_filter_bo:["VPMReference"],type_filter_rel:["VPMInstance"]};try{console.log("[SearchCAService] ProductId is:",t);const r=await(0,l.fV)(),i=(t,s,o)=>new Promise(((l,n)=>{r.authenticatedRequest(t,{method:s,headers:(0,a.A)((0,a.A)({},e),{},{"Content-Type":"application/json"}),data:JSON.stringify(o),type:"json",onComplete:e=>{console.log("Received response:",e),l(e)},onFailure:e=>{console.error("Request failed:",e),n(e)}})})),c=await i(o,"POST",n);console.log("[Get CA Details Service] Data received:",c);const{member:d}=c;if(d){let e=c.member.filter((e=>("VPMReference"===e.type||"Raw_Material"===e.type)&&e.id!==t)).map((e=>({id:e.id,type:e.type,name:e.title,state:e.state})));return e.length>0&&await Promise.all(e.map((async e=>{if("released"===e.state.toLowerCase()){let t="".concat(s,"/resources/v1/modeler/dslib/dslib:ClassifiedItem/").concat(e.id,"?$mask=dslib:ClassificationAttributesMask");const o=await i(t,"GET","");console.log("classResponse->",o);const a=o.member.flatMap((e=>{var t;return null!==(t=e.ClassificationAttributes)&&void 0!==t&&t.member?e.ClassificationAttributes.member.map((e=>e.ClassID)):[]}));e.classes=a}}))),{success:!0,data:e}}}catch(r){return console.error("Error while Fetching",r),{success:!1,data:[],error:r}}})(h,p),console.log("Type After:",u),console.log("[Use All Plants] Product Childrens",d),d.success&&t((0,r.VG)(d.data));const m=await(async(e,t,s)=>{const o="https://oi000186152-us1-space.3dexperience.3ds.com/enovia";let n=!1,r=[];const i="".concat(o,"/resources/enorelnav/v2/navigate/setPreferences");let c={widgetId:"ENORIPE_Relations_Preview_2751_2038-15:33:22",relations:["caproposedwhere_from"],allRelationsMode:!1,publicationsMode:!1,computeWithInstances:!1,attributesForView:["ds6w:status","ds6w:type","ds6w:identifier"],label:"ENXENG_AP-e1331143-1734517777960",lang:"en",ghostMode:!1},d="".concat(o,"/resources/enorelnav/v2/navigate/getEcosystem"),p={widgetId:"ENORIPE_Relations_Preview_2751_2038-15:33:22",responseMode:"objectsByPatterns",label:"ENXENG_AP-e1331143-1734517780491",ids:[t]};try{console.log("[Get CA Details] Product ID:",t);const u=await(0,l.fV)(),h=await new Promise(((t,s)=>{u.authenticatedRequest(i,{method:"POST",headers:(0,a.A)((0,a.A)({},e),{},{"Content-Type":"application/json"}),data:JSON.stringify(c),type:"json",onComplete:t,onFailure:s})}));if(console.log("[Get CA Details Service] Data received:",h),"OK"===h.status){const l=await new Promise(((t,s)=>{u.authenticatedRequest(d,{method:"POST",headers:(0,a.A)((0,a.A)({},e),{},{"Content-Type":"application/json"}),data:JSON.stringify(p),type:"json",onComplete:t,onFailure:s})}));console.log("[Get CA Details Service] Data received:",l),l.objectsByPatterns.caproposedwhere_from&&await Promise.all(l.objectsByPatterns.caproposedwhere_from.map((async a=>{if("Complete"!==a["ds6w:status"].slice(14)){let l="".concat(o,"/resources/v1/modeler/dslc/changeaction/").concat(a.id,"?$fields=proposedChanges,flowDown");const i=await new Promise(((t,s)=>{u.authenticatedRequest(l,{method:"GET",headers:e,type:"json",onComplete:t,onFailure:s})}));Array.isArray(i.proposedChanges)&&i.proposedChanges.forEach((e=>{r.push({identifier:e.where.identifier,action:e.whats[0].what})})),n="released"!==s.toLowerCase()||r.some((e=>e.identifier===t&&"Modify"===e.action))}})))}else console.error("Unable to Fetch the ");return console.log("Status is coming inside 7"),console.log("Response Object is:",n),{success:!0,data:n,proposedChanges:r}}catch(u){throw console.error("Failed Request:",{url:i,headers:e,body:c,error:u}),u}})(h,p,c);return console.log("[Use All Plants] Get CA Details",m),m.success&&(t((0,r.ug)(m.data)),t((0,r.aB)(m.proposedChanges))),void console.log("[Plant Assignment] All Services Executed Successfully")}e(i.rK)}catch(h){throw console.error("[Plant Assignment] Error:",h),t((0,r.Ve)(!1)),h}finally{t((0,r.Ve)(!1))}}}}},2268:(e,t,s)=>{s.d(t,{I:()=>a});var o=s(6047);const a=async()=>{try{let e=window.widget.getValue("Credentials");const t=await(0,o.fV)();console.log("Security Context is:",e);const s="https://oi000186152-us1-space.3dexperience.3ds.com/enovia/resources/v1/application/CSRF?tenant=OI000186152",a=await new Promise(((e,o)=>{t.authenticatedRequest(s,{method:"GET",type:"json",onComplete:e,onFailure:o})})),l=a.csrf.name,n=a.csrf.value,r="SecurityContext",i=e;return{[l]:n,[r]:i}}catch(e){return void console.error("[CSRF] Failed to fetch token:",e)}}},3127:(e,t,s)=>{s.d(t,{i:()=>n});var o=s(9379),a=s(9722),l=s(6047);const n=async(e,t,s,n,r,i,c,d,p,u,h)=>{try{const e="https://oi000186152-us1-space.3dexperience.3ds.com/enovia";console.log("[Save Data] Starting data saving process..."),console.log("Type in Save Table Data:",d),console.log("Final aRRAY IS inside Save:",u),console.log("Proposed Changes in Save",h);const t=await(0,l.fV)(),s=async(e,s,a)=>(console.log("Fetching URL:",e),console.log("Request Body:",JSON.stringify(s,null,2)),new Promise(((l,r)=>{t.authenticatedRequest(e,{method:a,headers:(0,o.A)((0,o.A)({},n),{},{"Content-Type":"application/json"}),data:JSON.stringify(s),type:"json",onComplete:e=>{console.log("Response received:",e),l(e)},onFailure:e=>{console.error("Request failed:",e),r(e)}})}))),i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";console.log("Fetching URL:",e),console.log("Method is:"),console.log("Request Body:",JSON.stringify(t,null,2));try{const l=await(0,a.A)({url:e,method:s,headers:(0,o.A)((0,o.A)({},n),{},{"Content-Type":"application/json"}),data:t});return console.log("Response received:",l.data),l.data}catch(l){throw console.error("Request failed:",l),l}};let g=c.filter((e=>{if("released"===e.state.toLowerCase()){return!h.find((t=>t.identifier===e.id&&"modify"===t.action.toLowerCase()))}return!1}));console.log("NotPropagableChilds ARE :",g);let f=[];u.forEach((e=>{if(e.MBOMValue){let t=[];g.forEach((s=>{s.classes.includes(e.id)||t.push({childId:s.id,childName:s.name})})),t.length>0&&f.push({id:e.id,title:e.title,childs:t,type:e.Type})}}));let w="";console.log("ErrorObj IS",f),f.forEach((e=>{let t="";if(Array.isArray(e.childs)&&e.childs.every((e=>e.childName))){const s=e.childs.map((e=>e.childName)).join(", ");console.log("Chilld Titles are",s),t="new"!==e.type.toLowerCase()?"".concat(e.title," MBOM can't be Make due to unclassified child items: ").concat(s):"Unable to classify product ".concat(e.title," due to unclassified child items: ").concat(s),console.log("Message is:",t)}else t="Invalid child data for ".concat(e.title,".");w+="".concat(t,"\n")})),console.log(f),console.log("Concatenated Messages:\n",w);let v=u.filter((e=>"new"===e.Type.toLowerCase()&&!f.some((t=>t.id===e.id)))).map((e=>e.id));console.log("New Classes are:",v);let y={};u.forEach((e=>{!f.some((t=>t.id===e.id))&&("update"===e.Type.toLowerCase()||"new"===e.Type.toLowerCase()&&e.MBOMValue)&&(y[e.MBOMName]=e.MBOMValue)})),console.log("Update body is:",y);let C=u.filter((e=>e.MBOMValue&&!f.some((t=>t.id===e.id)))).map((e=>e.id));if(console.log("Propogateable classes are",C),v.length>0){let e="https://emr-product-datahub-server-sap-stage.azurewebsites.net/plantAssignment/classifyProductToClass",t={id:r,type:d,classes:v,mode:"classifyParent"};const s=await i(e,t,"POST");console.log("classifyResponse:",JSON.stringify(s))}if(Object.keys(y).length>0){var m;const t="".concat(e,"/resources/v1/modeler/dslib/dslib:ClassifiedItem/").concat(r),o=await s(t,"","GET");console.log("CStamp Response:",o);let a=(null===(m=o.member[0])||void 0===m?void 0:m.cestamp)||"";y.cestamp=a;const l="https://emr-product-datahub-server-sap-stage.azurewebsites.net/plantAssignment/updateClassificationAttribute?id=".concat(r);await i(l,y,"PATCH"),console.log("Updated database successfully.")}if(C.length>0&&c.length>0&&"VPMReference"===d){let e="https://emr-product-datahub-server-sap-stage.azurewebsites.net/plantAssignment/classifyProductToClass",t={id:r,type:d,classes:C,childs:c,mode:"classifychilds"};const s=await i(e,t,"POST");console.log("child classifyResponse:",JSON.stringify(s))}if(p.length>0){let e="https://emr-product-datahub-server-sap-stage.azurewebsites.net/plantAssignment/declassifyProductToClass",t={id:r,type:d,classes:p};const s=await i(e,t,"POST");console.log("declassifyResponse:",JSON.stringify(s))}return console.log("All classification API calls completed successfully."),{success:!0,message:"Data saved successfully",ErrorObj:f,Finalmessage:w}}catch(g){return console.error("Error occurred:",g),{success:!1,message:"Failed to save data",error:g}}}},174:(e,t,s)=>{s.d(t,{M:()=>o});const o=async(e,t)=>{if(console.log("[refreshWidgetData] called with dataItems:",e),e&&0!==e.length)try{if("function"!==typeof t)throw new Error("[Refresh] handleDrop is not a function.");await t(e)}catch(s){console.error("[Refresh] Error during handleDrop execution:",s)}else console.warn("[Refresh] No dropped data available to refresh.")}},4119:()=>{}}]);
//# sourceMappingURL=634.547705c4.chunk.js.map